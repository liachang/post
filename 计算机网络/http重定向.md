```
URL 重定向，也称为 URL 转发，是一种当实际资源，被迁移到新的 URL 下的时候，如果不做重定向，用户收藏夹或搜索引擎数据库中旧地址只能让访问客户还会得到一个404页面错误信息，保持（原有）链接可用的技术。HTTP 协议提供了一种特殊形式的响应—— HTTP 重定向（HTTP redirects）来执行此类操作。
```

```
应用场景
域名更换301
站点维护或停机期间的临时重定向。
上传文件、用户登陆、付款订单的页面。302
再如某些注册了多个域名的网站，也需要通过重定向让访问这些域名的用户自动跳转到主站点
```

### 原理

```
在 HTTP 协议中，重定向操作由服务器通过发送特殊的响应（即 redirects）而触发。HTTP 协议的重定向响应的状态码为 3xx 。
浏览器在接收到重定向响应的时候，会采用该响应提供的新的 URL ，并立即进行加载
```

### 三个类别：

#### 永久重定向

```
被请求的资源已永久移动到新位置，并且将来任何对此资源的引用都应该使用本响应返回的若干个URI之一。
如果可能，拥有链接编辑功能的客户端应当自动把请求的地址修改为从服务器反馈回来的地址。
搜索引擎机器人会在遇到该状态码时触发更新操作，在其索引库中修改与该资源相关的 URL 。
一般可缓存
```

```
状态码301: Moved Permanently ，GET 方法不会发生变更，其他方法有可能会变更为 GET 方法，网站重构
状态码308: Permanent Redirect, 方法和消息主体都不发生变化,用于非GET方法的网站重构
```

#### 临时重定向

```
有时候请求的资源无法从其标准地址访问，但是却可以从另外的地方访问。在这种情况下可以使用临时重定向。
搜索引擎不会记录该新的、临时的链接。
在创建、更新或者删除资源的时候，临时重定向也可以用于显示临时性的进度页面。
客户端应当继续向原有地址发送以后的请求
```

```
状态码302: Found, GET方法不会发生变更，其他方法有可能会变更为 GET 方法,由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。
状态码303: See Other,GET 方法不会发生变更，其他方法会变更为 GET 方法（消息主体会丢失）。用于PUT 或 POST 请求完成之后进行页面跳转来防止由于页面刷新导致的操作的重复触发。
状态码307: Temporary Redirect	方法和消息主体都不发生变化。	由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。当站点支持非 GET 方法的链接或操作的时候，该状态码优于 302 状态码。
```

#### 特殊重定向

```
304 （Not Modified，资源未被修改）会使页面跳转到本地陈旧的缓存版本当中
300 （Multiple Choice，多项选择） 则是一种手工重定向：以 Web 页面形式呈现在浏览器中的消息主体包含了一个可能的重定向链接的列表，用户可以从中进行选择。
```

## 设定重定向映射的其他方法

#### 借助 HTML 的 meta 元素的 HTML 重定向机制

```
Web开发者对于服务器没有控制权，或者无法对其进行配置。
<head>部分添加一个<meta> 元素，并将其 http-equiv 属性的值设置为 refresh 。
当显示页面的时候，浏览器会检测该元素，然后跳转到指定的页面。
content 属性的值是一个数字，指示浏览器在等待该数字表示的秒数之后再进行跳转。建议始终将其设置为0来获取更好的可访问性。
```

```
<head>
  <meta http-equiv="Refresh" content="0; URL=http://example.com/" />
</head>
```

```
该方法仅适用于 HTML 页面（或类似的页面），然而并不能应用于图片或者其他类型的内容。
```

#### 借助 DOM的 JavaScript 重定向机制。

```
<script language="javascript" type="text/javascript">
window.location.href = 'src'
或
alert('返回')
window.history.back(-1)
或
window.navigate(src)
或
self.location(src)
或
top.location(src)
</script>
```

### 优先级

1. HTTP 协议的重定向机制永远最先触发
2. HTML 的重定向机制meta
3. JavaScript最后起作用

### 重定向和转发请求的区别

```
转发是服务器行为，重定向是服务器行为
转发指客户端发送请求，服务器在内部完成请求处理，发送目标资源
重定向指客户端发送请求1，服务器响应新的url和302,客户端发送新的url请求，服务器返回资源
```

